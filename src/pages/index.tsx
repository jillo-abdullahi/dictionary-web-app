import Head from "next/head";
import { useState, useEffect } from "react";
import Image from "next/image";
import { InputField } from "@/components/inputField";
import { Header } from "@/containers/Header";
import { FontType } from "@/containers/Header";

export default function Home() {
  const [isDarkTheme, setIsDarkTheme] = useState(true);
  const [font, setFont] = useState<FontType>(FontType.INTER);
  const [textColor, setTextColor] = useState<"text-white" | "text-black">(
    "text-white"
  );
  const [searchTerm, setSearchTerm] = useState<string>("");
  const [error, setError] = useState<string>("");

  const [backgroundColor, setBackgroundColor] = useState<
    "bg-white" | "bg-black"
  >("bg-black");

  const toggleTheme = () => {
    setIsDarkTheme(!isDarkTheme);
  };

  const toggleFont = (_font: FontType) => {
    if (_font === FontType.INTER) {
      setFont(FontType.INTER);
    } else if (_font === FontType.LORA) {
      setFont(FontType.LORA);
    } else {
      setFont(FontType.INCONSOLATA);
    }
  };

  useEffect(() => {
    if (!isDarkTheme) {
      setTextColor("text-black");
      setBackgroundColor("bg-white");
    } else {
      setTextColor("text-white");
      setBackgroundColor("bg-black");
    }
  }, [isDarkTheme]);

  // need to clear error when searchTerm changes
  useEffect(() => {
    setError("");
  }, [searchTerm]);

  const handleSubmit = (e) => {
    e.preventDefault();

    if (searchTerm.trim() === "") {
      setError("Whoops, can’t be empty...");
    } else {
      setError("");
    }
  };

  return (
    <>
      <Head>
        <title>Dictionary</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/assets/images/logo.svg" />
      </Head>
      <main
        className={`w-full h-full min-h-screen flex justify-center pt-58 pb-10 ${backgroundColor} ${textColor} ${font} transition-all duration-500 ease-in-out`}
      >
        <div className="max-w-736 w-full">
          <Header
            theme={isDarkTheme ? "dark" : "light"}
            toggleTheme={toggleTheme}
            font={font}
            toggleFont={toggleFont}
          />

          <div className="w-full mt-14">
            <InputField
              value={searchTerm}
              error={error}
              placeholder="Search for any word..."
              handleChange={(e) => setSearchTerm(e.target.value)}
              handleSubmit={handleSubmit}
              font={font}
              theme={isDarkTheme ? "dark" : "light"}
            />
          </div>

          <div className="mt-12">
            <div className="flex w-full justify-between items-center">
              <div className="flex flex-col space-y-2">
                <h1 className="text-6xl font-bold">Keyboard</h1>
                <span className="text-purple text-2xl">{"/ˈkiːbɔːd/"}</span>
              </div>
              <button>
                <Image
                  src="/assets/images/icon-play.svg"
                  alt="volume"
                  width={75}
                  height={75}
                />
              </button>
            </div>

            <div className="mt-12 w-full">
              <div className="relative flex items-center">
                <h2 className="mr-5 text-2xl italic font-bold ">noun</h2>
                <hr
                  className={`  w-full ${
                    isDarkTheme ? "border-gray-400" : "border-gray-200"
                  }`}
                />
              </div>

              <div className="mt-10">
                {/* Meaning  */}
                <h3 className="text-gray-300 text-xl pb-6">Meaning</h3>
                <div className="pl-10">
                  <ul className="list-disc  marker:text-purple space-y-3">
                    <li className="text-lg">
                      (etc.) A set of keys used to operate a typewriter,
                      computer etc.
                    </li>
                    <li className="text-lg">
                      A component of many instruments including the piano,
                      organ, and harpsichord consisting of usually black and
                      white keys that cause different tones to be produced when
                      struck.
                    </li>
                    <li className="text-lg">
                      A device with keys of a musical keyboard, used to control
                      electronic sound-producing devices which may be built into
                      or separate from the keyboard device.
                    </li>
                  </ul>
                </div>
                {/* Synonyms  */}
                <div className="flex items-center justify-start mt-10">
                  <h3 className="text-gray-300 text-xl">Synonyms</h3>
                  <div className="ml-2 space-x-2">
                    <span className="text-purple text-bold text-xl">
                      electronic
                    </span>
                    <span className="text-purple text-bold text-xl">
                      Keyboard
                    </span>
                  </div>
                </div>
              </div>

              {/* Verbs  */}
              <div className="mt-12 w-full">
                <div className="relative flex items-center">
                  <h2 className="mr-5 text-2xl italic font-bold ">verb</h2>
                  <hr
                    className={`  w-full ${
                      isDarkTheme ? "border-gray-400" : "border-gray-200"
                    }`}
                  />
                </div>
              </div>

              <div className="mt-10">
                <h3 className="text-gray-300 text-xl pb-6">Meaning</h3>
                <div className="pl-10">
                  <ul className="list-disc  marker:text-purple space-y-3">
                    <li className="text-lg">
                      <p>
                        (etc.) A set of keys used to operate a typewriter,
                        computer etc.
                      </p>

                      <p className="mt-3 text-gray-300">
                        “Keyboarding is the part of this job I hate the most.”
                      </p>
                    </li>
                  </ul>
                </div>
              </div>

              {/* source  */}
              <div className="flex items-center justify-start space-x-5 w-full border-t border-gray-400 mt-10 pt-5">
                <p className="text-gray-300 text-sm">Source</p>
                <p className="text-gray-300">
                  <a
                    href="https://en.wiktionary.org/wiki/keyboard"
                    target="_blank"
                    className="text-sm flex space-x-2"
                  >
                    <span>https://en.wiktionary.org/wiki/keyboard</span>

                    <Image
                      src="/assets/images/icon-new-window.svg"
                      alt="external"
                      width={15}
                      height={15}
                    />
                  </a>
                </p>
              </div>
            </div>
          </div>
        </div>
      </main>
    </>
  );
}
